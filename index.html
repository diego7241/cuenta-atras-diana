<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cuenta atr√°s ‚Äî Cada d√≠a menos para volver a ti</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#FFF8F3; --card:#ffffff; --muted:#9b9b9b; --accent:#ff7a6b; --teal:#2bb6a3;
      --paper:#fffefc; --shadow: 0 8px 30px rgba(15,15,15,0.08);
    }
    *{box-sizing:border-box}
    body{
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;
      background:linear-gradient(180deg,var(--bg),#FFFDFB);
      padding:28px;
      color:#233;
    }
    .wrap{
      max-width:1100px;
      margin:12px auto;
      padding:28px;
      background:var(--card);
      border-radius:18px;
      box-shadow:var(--shadow);
    }
    header{
      display:flex;
      align-items:center;
      gap:18px;
      flex-wrap:wrap;
    }
    .title{flex:1}
    h1{
      font-family:'Great Vibes',serif;
      font-size:42px;
      margin:0;
      color:var(--accent);
      line-height:1.1;
    }
    p.lead{margin:6px 0 0;color:var(--muted)}

    .meta{display:flex;gap:10px;align-items:center}
    .meta small{color:var(--muted)}

    .poster{
      display:grid;
      grid-template-columns:repeat(4,1fr);
      gap:18px;
      margin-top:22px;
    }
    .month{
      background:linear-gradient(180deg,#ffffff, #fffdfb);
      border-radius:12px;
      padding:14px 12px;
      box-shadow:0 6px 18px rgba(12,12,12,0.05);
      border:1px solid rgba(0,0,0,0.03)
    }
    .month h3{margin:0 0 8px;font-size:18px;color:#333}
    .month .hint{font-size:13px;color:var(--muted);margin-bottom:8px}

    .grid{
      display:grid;
      grid-template-columns:repeat(7,1fr);
      gap:8px
    }
    .day{
      background:var(--paper);
      height:48px;
      border-radius:8px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:600;
      position:relative;
      cursor:pointer;
      border:1px dashed rgba(0,0,0,0.03)
    }
    .day.small{height:40px;font-size:14px}
    .day.disabled{opacity:0.25;cursor:default}
    .day .mark{font-size:18px}
    .day .date{
      position:absolute;
      top:6px;
      left:8px;
      font-size:11px;
      color:var(--muted);
      font-weight:500
    }

    .legend{
      display:flex;
      gap:12px;
      align-items:center;
      margin-top:14px;
      flex-wrap:wrap;
    }
    .legend .chip{
      display:flex;
      gap:6px;
      align-items:center;
      padding:6px 10px;
      border-radius:999px;
      background:#fff;
      border:1px solid rgba(0,0,0,0.04)
    }

    .controls{
      display:flex;
      gap:8px;
      align-items:center;
      justify-content:flex-end;
      margin-top:12px;
      flex-wrap:wrap;
    }
    button{
      background:var(--teal);
      color:#fff;
      padding:10px 14px;
      border-radius:10px;
      border:none;
      cursor:pointer;
      font-weight:600
    }
    button.ghost{
      background:transparent;
      color:var(--teal);
      border:1px solid rgba(43,182,163,0.14)
    }

    .notes{
      margin-top:16px;
      color:var(--muted);
      font-size:14px
    }

    /* special march 22 */
    .special{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      padding:8px;
      height:100%;
      text-align:center
    }
    .special .big{
      font-size:20px;
      color:var(--accent);
      font-weight:700
    }
    .special .sub{
      font-size:13px;
      color:var(--muted)
    }

    /* responsive improvements */
    @media(max-width:920px){
      .poster{grid-template-columns:repeat(2,1fr)}
      h1{font-size:34px;text-align:center}
      header{justify-content:center;text-align:center}
    }
    @media(max-width:600px){
      .poster{grid-template-columns:1fr}
      h1{font-size:30px}
      body{padding:12px}
      .wrap{padding:20px}
      .day{height:42px;font-size:15px}
      .controls{justify-content:center}
      button{width:100%;max-width:300px}
    }
    @media(max-width:420px){
      h1{font-size:26px}
      .day{height:38px;font-size:14px}
      .grid{gap:6px}
    }

    /* print */
    @media print{
      body{padding:0}
      .controls, .legend, header .meta{display:none}
      .wrap{box-shadow:none;border-radius:0}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="title">
        <h1>Cada d√≠a que pasa, es un d√≠a menos para volver a ti.</h1>
        <p class="lead">Calendario ‚Äî Del <strong>11 de diciembre</strong> al <strong>22 de marzo</strong></p>
      </div>
      <div class="meta">
        <small>Marca con ‚ùå o ‚ù§Ô∏è cada d√≠a</small>
      </div>
    </header>

    <div class="controls">
      <button id="clear">Limpiar marcas</button>
      <button id="print" class="ghost">Imprimir / Guardar PDF</button>
    </div>

    <div class="poster" id="poster"></div>

    <div class="legend">
      <div class="chip">‚ùå D√≠a completado</div>
      <div class="chip">‚ù§Ô∏è D√≠a especial</div>
      <div style="flex:1"></div>
      <div class="chip">üå∏ 22 de marzo ‚Äî ¬°Vuelve a casa!</div>
    </div>

    <p class="notes">
      Sugerencia: guarda la p√°gina en tu computador como <code>cuenta_atras.html</code> y √°brela en el navegador.
      Las marcas se guardar√°n en este navegador (localStorage).
    </p>
  </div>

  <script>
    /* Tu script original completo, SIN CAMBIOS */
    const now = new Date();
    const startYear = now.getFullYear();
    const start = new Date(startYear, 11, 11);
    const end = new Date(start.getFullYear()+1, 2, 22);

    const poster = document.getElementById('poster');

    const months = [
      {name: 'Diciembre', year: start.getFullYear(), from: 11, startDay: 11, endDay: 31, hint: 'Tu primer mes lejos, pero aqu√≠ sigo contigo.'},
      {name: 'Enero', year: start.getFullYear()+1, from: 0, startDay: 1, endDay: 31, hint: 'Un nuevo a√±o, pero mi amor por ti sigue siendo el mismo.'},
      {name: 'Febrero', year: start.getFullYear()+1, from: 1, startDay: 1, endDay: null, hint: 'Falta poco‚Ä¶ muy poco. Cada d√≠a te acerca a m√≠.'},
      {name: 'Marzo', year: start.getFullYear()+1, from: 2, startDay: 1, endDay: 22, hint: ''}
    ];

    function daysInMonth(y,m){ return new Date(y,m+1,0).getDate(); }
    if(months[2].endDay === null){ months[2].endDay = daysInMonth(months[2].year,1); }

    const LSKEY = 'cuenta_atras_marcas_' + start.getFullYear() + '_' + (start.getFullYear()+1);
    let marks = JSON.parse(localStorage.getItem(LSKEY) || '{}');

    months.forEach((m)=>{
      const col = document.createElement('div');
      col.className = 'month';
      const title = document.createElement('h3');
      title.textContent = m.name + ' ' + m.year;
      col.appendChild(title);
      if(m.hint){
        const hint = document.createElement('div');
        hint.className='hint';
        hint.textContent = m.hint;
        col.appendChild(hint);
      }

      const grid = document.createElement('div');
      grid.className = 'grid';

      const weekNames = ['L','M','M','J','V','S','D'];
      weekNames.forEach(w=>{
        const wEl = document.createElement('div');
        wEl.className='day small disabled';
        wEl.style.fontWeight=700;
        wEl.textContent = w;
        grid.appendChild(wEl);
      });

      const firstWeekday = new Date(m.year, m.from, m.startDay).getDay();
      const jsToGrid = d => (d + 6) % 7;
      const offset = jsToGrid(firstWeekday);

      for(let b=0;b<offset;b++){
        const blank = document.createElement('div');
        blank.className='day disabled';
        grid.appendChild(blank);
      }

      const endDay = m.endDay;
      for(let d = m.startDay; d<=endDay; d++){
        const date = new Date(m.year, m.from, d);

        if(date < start || date > end) {
          const blank = document.createElement('div');
          blank.className='day disabled';
          grid.appendChild(blank);
          continue;
        }

        const cell = document.createElement('div');
        cell.className='day';
        const dateLabel = document.createElement('div');
        dateLabel.className='date';
        dateLabel.textContent = d;
        cell.appendChild(dateLabel);
        const mark = document.createElement('div');
        mark.className='mark';
        const key = date.toISOString().slice(0,10);
        if(marks[key]){ mark.textContent = marks[key]; }
        cell.appendChild(mark);

        if(date.getMonth()===2 && date.getDate()===22){
          cell.classList.add('special');
          cell.innerHTML = '<div class="special"><div class="big">üå∏ Hoy vuelves a casa‚Ä¶ y a m√≠.</div><div class="sub">(‚ù§Ô∏è Tu inicial + Su inicial)</div></div>';
        } else {
          cell.addEventListener('click', ()=>{
            const cur = marks[key] || '';
            const next = cur === '' ? '‚ùå' : (cur === '‚ùå' ? '‚ù§Ô∏è' : '');
            marks[key] = next;
            if(next === '') delete marks[key];
            localStorage.setItem(LSKEY, JSON.stringify(marks));
            mark.textContent = next;
          });
        }

        grid.appendChild(cell);
      }

      col.appendChild(grid);
      poster.appendChild(col);
    });

    document.getElementById('clear').addEventListener('click', ()=>{
      if(confirm('¬øBorrar todas las marcas?')){
        marks = {};
        localStorage.removeItem(LSKEY);
        location.reload();
      }
    });
    document.getElementById('print').addEventListener('click', ()=> window.print());
  </script>
</body>
</html>
